Console.WriteLine("      Player 1 vs Computer\n");
            Console.WriteLine($"         -- Match {match} -- \n");

            Console.WriteLine("\nGame over. Thanks for playing!\n");
                Console.Write("Press any key to play again or \"ESC\" to back to the start menu.");

                Console.ReadKey();
                Console.Clear();
                return;


                using System;

public class Game
{
    private Player player1 = null!;
    private Player player2 = null!;
    private bool isplayer2Game;

    public Game(Player p1, Player p2)
    {
        //Multiplayer
        player1 = p1;
        player2 = p2;
        isplayer2Game = false;
    }
    public Game(Player p1)
    {
        //Singleplayer
        player1 = p1;
        player2 = new Player("Computer");
        isplayer2Game = true;
    }
    public void StartPvp()
    {
        Console.Clear();
        Console.WriteLine("      Player 1 vs Player 2\n");

        player1.AddCardToHand(new Card(CardName.Emperor));
        player1.AddCardToHand(new Card(CardName.Citizen));
        player1.AddCardToHand(new Card(CardName.Citizen));
        player1.AddCardToHand(new Card(CardName.Citizen));
        player1.AddCardToHand(new Card(CardName.Slave));

        player2.AddCardToHand(new Card(CardName.Emperor));
        player2.AddCardToHand(new Card(CardName.Citizen));
        player2.AddCardToHand(new Card(CardName.Citizen));
        player2.AddCardToHand(new Card(CardName.Citizen));
        player2.AddCardToHand(new Card(CardName.Slave));

        int match = 1;
        for (int round = 0; round < 5; round++)
        {
            Console.WriteLine($"\nRound {match}");
            Console.WriteLine($"{player1.Name}, choose a card index (0-{player1.Hand.Count - 1}):");
            int p1Index = int.Parse(Console.ReadLine()!);

            Console.WriteLine($"{player2.Name}, choose a card index (0-{player2.Hand.Count - 1}):");
            int p2Index = int.Parse(Console.ReadLine()!);

            Card p1Card = player1.PlayCard(p1Index)!;
            Card p2Card = player2.PlayCard(p2Index)!;

            DetermineRoundWinner(p1Card, p2Card);
            match++;

        }

        Console.WriteLine("Game over. Thanks for playing!\n");
        Console.Write("Press any key to play again or \"ESC\" to back to the start menu.");
    }
    public void StartPvCpu()
    {
        Random random = new Random();
        Console.Clear();

        player1.AddCardToHand(new Card(CardName.Emperor));
        player1.AddCardToHand(new Card(CardName.Citizen));
        player1.AddCardToHand(new Card(CardName.Citizen));
        player1.AddCardToHand(new Card(CardName.Citizen));
        player1.AddCardToHand(new Card(CardName.Slave));

        player2.AddCardToHand(new Card(CardName.Emperor));
        player2.AddCardToHand(new Card(CardName.Citizen));
        player2.AddCardToHand(new Card(CardName.Citizen));
        player2.AddCardToHand(new Card(CardName.Citizen));
        player2.AddCardToHand(new Card(CardName.Slave));

        int match = 1;
        for (int round = 0; round < 5; round++)
        {
            Console.WriteLine("      Player 1 vs Computer\n");
            Console.WriteLine($"         -- Match {match} -- \n");

            // Shuffle player1's hand
            player1.Hand = player1.Hand.OrderBy(x => random.Next()).ToList();

            // Display player1's hand with indices

            Console.Write($"{player1.Name}, choose a card index:\n");
            Console.WriteLine();
            for (int i = 0; i < player1.Hand.Count; i++)
            {
                Console.WriteLine($"{i}: {player1.Hand[i].Name}");
            }
            int p1Index = int.Parse(Console.ReadLine()!);

            int p2Index = random.Next(0, player2.Hand.Count);

            Card p1Card = player1.PlayCard(p1Index)!;
            Card p2Card = player2.PlayCard(p2Index)!;

            Console.WriteLine($"\n{player1.Name} chose card {p1Card.Name}");
            Console.WriteLine($"\n{player2.Name} chose card {p2Card.Name}\n");

            DetermineRoundWinner(p1Card, p2Card);
            match++;
            if (round == 4)
            {
                Console.WriteLine("\nGame over. Thanks for playing!\n");
                Console.Write("Press any key to play again or \"ESC\" to back to the start menu.");

                Console.ReadKey();
                Console.Clear();
                return;
            }
            Console.Write("\nPress any key to start the next match ");
            Console.ReadKey();
            Console.Clear();
        }
    }

    private void DetermineRoundWinner(Card p1Card, Card p2Card)
    {
        Console.WriteLine($"{player1.Name} played {p1Card.Name}");
        Console.WriteLine($"{player2.Name} played {p2Card.Name}");

        if (p1Card.Name == CardName.Emperor && p2Card.Name == CardName.Citizen ||
            p1Card.Name == CardName.Citizen && p2Card.Name == CardName.Slave ||
            p1Card.Name == CardName.Slave && p2Card.Name == CardName.Emperor)
        {
            Console.WriteLine($"\n===== {player1.Name} wins the match! =====");
        }
        else if (p2Card.Name == CardName.Emperor && p1Card.Name == CardName.Citizen ||
                 p2Card.Name == CardName.Citizen && p1Card.Name == CardName.Slave ||
                 p2Card.Name == CardName.Slave && p1Card.Name == CardName.Emperor)
        {
            Console.WriteLine($"\n===== {player2.Name} wins the match! =====");
        }
        else
        {
            Console.WriteLine("\nIt's a draw!");
        }
    }

}
